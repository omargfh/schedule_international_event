{% extends "layout.html" %} {% block title %} Home {% endblock %} {% block main %}

<div class="row">
    <div class="col-lg-4">
        <div class="sidebar">
            <h2>
                Recent Results
            </h2>
            <div id="sidebar-content">

            </div>
        </div>
    </div>
    <div class="col-lg-8">
        <div class="d-flex align-content-center justify-content-center">
            <form style="width: 90%;" action="/" method="POST">
                <div class="form-group">
                    <div class="form-row">
                        <div class="form-group col-md-6 ">
                            <label for="inputStartTime">Earliest Start Time<i class="req"></i></label>
                            <input type="time" class="form-control " id="inputStartTime" required>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="inputEndTime">Latest Start Time<i class="req"></i></label>
                            <input type="time" class="form-control " id="inputEndTime" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6 ">
                            <label for="inputEStartTime">Earliest Preferred Local Time</label>
                            <input type="time" class="form-control " id="inputEStartTime">
                        </div>
                        <div class="form-group col-md-6" data-toggle="popover" title="Popover title" data-content="And here's some amazing content. It's very engaging. Right?">
                            <label for="inputEEndTime">Latest Preferred Local Time</label>
                            <input type="time" class="form-control " id="inputEEndTime">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label for="inputDate">Event Date<i class="req"></i></label>
                            <input type="date" class="form-control" id="inputDate" required>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputCW">Country Weight<i class="req"></i></label>
                            <input type="number" step="10" class="form-control" value="100" id="inputCW" placeholder="100" required>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputOffset">Offset<i class="req"></i></label>
                            <input type="number" step="15" class="form-control" value="30" id="inputOffset" placeholder="30" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label for="inputLocalTimezone" id="labelILT">Local Timezone</label>
                            <input list="timezones" class="form-control" id="inputLocalTimezone" disabled>
                            <datalist id="timezones" style="width: 100%"> 
                                <option value="Africa/Abidjan">
                                    <option value="Africa/Accra">
                                    <option value="Africa/Addis_Ababa">
                                    <option value="Africa/Algiers">
                                    <option value="Africa/Asmara">
                                    <option value="Africa/Bamako">
                                    <option value="Africa/Bangui">
                                    <option value="Africa/Banjul">
                                    <option value="Africa/Bissau">
                                    <option value="Africa/Blantyre">
                                    <option value="Africa/Brazzaville">
                                    <option value="Africa/Bujumbura">
                                    <option value="Africa/Cairo">
                                    <option value="Africa/Casablanca">
                                    <option value="Africa/Ceuta">
                                    <option value="Africa/Conakry">
                                    <option value="Africa/Dakar">
                                    <option value="Africa/Dar_es_Salaam">
                                    <option value="Africa/Djibouti">
                                    <option value="Africa/Douala">
                                    <option value="Africa/El_Aaiun">
                                    <option value="Africa/Freetown">
                                    <option value="Africa/Gaborone">
                                    <option value="Africa/Harare">
                                    <option value="Africa/Johannesburg">
                                    <option value="Africa/Juba">
                                    <option value="Africa/Kampala">
                                    <option value="Africa/Khartoum">
                                    <option value="Africa/Kigali">
                                    <option value="Africa/Kinshasa">
                                    <option value="Africa/Lagos">
                                    <option value="Africa/Libreville">
                                    <option value="Africa/Lome">
                                    <option value="Africa/Luanda">
                                    <option value="Africa/Lubumbashi">
                                    <option value="Africa/Lusaka">
                                    <option value="Africa/Malabo">
                                    <option value="Africa/Maputo">
                                    <option value="Africa/Maseru">
                                    <option value="Africa/Mbabane">
                                    <option value="Africa/Mogadishu">
                                    <option value="Africa/Monrovia">
                                    <option value="Africa/Nairobi">
                                    <option value="Africa/Ndjamena">
                                    <option value="Africa/Niamey">
                                    <option value="Africa/Nouakchott">
                                    <option value="Africa/Ouagadougou">
                                    <option value="Africa/Porto-Novo">
                                    <option value="Africa/Sao_Tome">
                                    <option value="Africa/Tripoli">
                                    <option value="Africa/Tunis">
                                    <option value="Africa/Windhoek">
                                    <option value="America/Anchorage">
                                    <option value="America/Anguilla">
                                    <option value="America/Antigua">
                                    <option value="America/Araguaina">
                                    <option value="America/Argentina/Buenos_Aires">
                                    <option value="America/Argentina/Catamarca">
                                    <option value="America/Argentina/Cordoba">
                                    <option value="America/Argentina/Jujuy">
                                    <option value="America/Argentina/La_Rioja">
                                    <option value="America/Argentina/Mendoza">
                                    <option value="America/Argentina/Rio_Gallegos">
                                    <option value="America/Argentina/Salta">
                                    <option value="America/Argentina/San_Juan">
                                    <option value="America/Argentina/San_Luis">
                                    <option value="America/Argentina/Tucuman">
                                    <option value="America/Argentina/Ushuaia">
                                    <option value="America/Aruba">
                                    <option value="America/Asuncion">
                                    <option value="America/Atikokan">
                                    <option value="America/Bahia">
                                    <option value="America/Bahia_Banderas">
                                    <option value="America/Barbados">
                                    <option value="America/Belem">
                                    <option value="America/Belize">
                                    <option value="America/Blanc-Sablon">
                                    <option value="America/Boa_Vista">
                                    <option value="America/Bogota">
                                    <option value="America/Boise">
                                    <option value="America/Cambridge_Bay">
                                    <option value="America/Campo_Grande">
                                    <option value="America/Cancun">
                                    <option value="America/Caracas">
                                    <option value="America/Cayenne">
                                    <option value="America/Cayman">
                                    <option value="America/Chicago">
                                    <option value="America/Chihuahua">
                                    <option value="America/Costa_Rica">
                                    <option value="America/Creston">
                                    <option value="America/Cuiaba">
                                    <option value="America/Curacao">
                                    <option value="America/Dawson">
                                    <option value="America/Dawson_Creek">
                                    <option value="America/Denver">
                                    <option value="America/Detroit">
                                    <option value="America/Dominica">
                                    <option value="America/Edmonton">
                                    <option value="America/Eirunepe">
                                    <option value="America/El_Salvador">
                                    <option value="America/Fort_Nelson">
                                    <option value="America/Fortaleza">
                                    <option value="America/Glace_Bay">
                                    <option value="America/Godthab">
                                    <option value="America/Goose_Bay">
                                    <option value="America/Grand_Turk">
                                    <option value="America/Grenada">
                                    <option value="America/Guadeloupe">
                                    <option value="America/Guatemala">
                                    <option value="America/Guayaquil">
                                    <option value="America/Guyana">
                                    <option value="America/Halifax">
                                    <option value="America/Havana">
                                    <option value="America/Hermosillo">
                                    <option value="America/Indiana/Indianapolis">
                                    <option value="America/Indiana/Knox">
                                    <option value="America/Indiana/Marengo">
                                    <option value="America/Indiana/Petersburg">
                                    <option value="America/Indiana/Tell_City">
                                    <option value="America/Indiana/Vevay">
                                    <option value="America/Indiana/Vincennes">
                                    <option value="America/Indiana/Winamac">
                                    <option value="America/Inuvik">
                                    <option value="America/Iqaluit">
                                    <option value="America/Jamaica">
                                    <option value="America/Juneau">
                                    <option value="America/Kentucky/Louisville">
                                    <option value="America/Kentucky/Monticello">
                                    <option value="America/Kralendijk">
                                    <option value="America/La_Paz">
                                    <option value="America/Lima">
                                    <option value="America/Los_Angeles">
                                    <option value="America/Lower_Princes">
                                    <option value="America/Maceio">
                                    <option value="America/Managua">
                                    <option value="America/Manaus">
                                    <option value="America/Marigot">
                                    <option value="America/Martinique">
                                    <option value="America/Matamoros">
                                    <option value="America/Mazatlan">
                                    <option value="America/Menominee">
                                    <option value="America/Merida">
                                    <option value="America/Metlakatla">
                                    <option value="America/Mexico_City">
                                    <option value="America/Miquelon">
                                    <option value="America/Moncton">
                                    <option value="America/Monterrey">
                                    <option value="America/Montevideo">
                                    <option value="America/Montserrat">
                                    <option value="America/Nassau">
                                    <option value="America/New_York">
                                    <option value="America/Nipigon">
                                    <option value="America/Nome">
                                    <option value="America/Noronha">
                                    <option value="America/North_Dakota/Beulah">
                                    <option value="America/North_Dakota/New_Salem">
                                    <option value="America/Ojinaga">
                                    <option value="America/Panama">
                                    <option value="America/Pangnirtung">
                                    <option value="America/Paramaribo">
                                    <option value="America/Phoenix">
                                    <option value="America/Port-au-Prince">
                                    <option value="America/Port_of_Spain">
                                    <option value="America/Porto_Velho">
                                    <option value="America/Puerto_Rico">
                                    <option value="America/Punta_Arenas">
                                    <option value="America/Rankin_Inlet">
                                    <option value="America/Recife">
                                    <option value="America/Regina">
                                    <option value="America/Resolute">
                                    <option value="America/Rio_Branco">
                                    <option value="America/Santarem">
                                    <option value="America/Santiago">
                                    <option value="America/Santo_Domingo">
                                    <option value="America/Sao_Paulo">
                                    <option value="America/Sitka">
                                    <option value="America/St_Barthelemy">
                                    <option value="America/St_Johns">
                                    <option value="America/St_Kitts">
                                    <option value="America/St_Lucia">
                                    <option value="America/St_Thomas">
                                    <option value="America/St_Vincent">
                                    <option value="America/Swift_Current">
                                    <option value="America/Tegucigalpa">
                                    <option value="America/Thule">
                                    <option value="America/Thunder_Bay">
                                    <option value="America/Tijuana">
                                    <option value="America/Toronto">
                                    <option value="America/Tortola">
                                    <option value="America/Vancouver">
                                    <option value="America/Whitehorse">
                                    <option value="America/Winnipeg">
                                    <option value="America/Yellowknife">
                                    <option value="Arctic/Longyearbyen">
                                    <option value="Asia/Aden">
                                    <option value="Asia/Almaty">
                                    <option value="Asia/Amman">
                                    <option value="Asia/Anadyr">
                                    <option value="Asia/Aqtau">
                                    <option value="Asia/Aqtobe">
                                    <option value="Asia/Ashgabat">
                                    <option value="Asia/Atyrau">
                                    <option value="Asia/Baghdad">
                                    <option value="Asia/Bahrain">
                                    <option value="Asia/Baku">
                                    <option value="Asia/Bangkok">
                                    <option value="Asia/Barnaul">
                                    <option value="Asia/Beirut">
                                    <option value="Asia/Bishkek">
                                    <option value="Asia/Brunei">
                                    <option value="Asia/Chita">
                                    <option value="Asia/Choibalsan">
                                    <option value="Asia/Colombo">
                                    <option value="Asia/Damascus">
                                    <option value="Asia/Dhaka">
                                    <option value="Asia/Dili">
                                    <option value="Asia/Dubai">
                                    <option value="Asia/Dushanbe">
                                    <option value="Asia/Famagusta">
                                    <option value="Asia/Gaza">
                                    <option value="Asia/Hebron">
                                    <option value="Asia/Ho_Chi_Minh">
                                    <option value="Asia/Hong_Kong">
                                    <option value="Asia/Hovd">
                                    <option value="Asia/Irkutsk">
                                    <option value="Asia/Jakarta">
                                    <option value="Asia/Jayapura">
                                    <option value="Asia/Jerusalem">
                                    <option value="Asia/Kabul">
                                    <option value="Asia/Kamchatka">
                                    <option value="Asia/Karachi">
                                    <option value="Asia/Kathmandu">
                                    <option value="Asia/Kolkata">
                                    <option value="Asia/Krasnoyarsk">
                                    <option value="Asia/Kuala_Lumpur">
                                    <option value="Asia/Kuching">
                                    <option value="Asia/Kuwait">
                                    <option value="Asia/Macau">
                                    <option value="Asia/Magadan">
                                    <option value="Asia/Makassar">
                                    <option value="Asia/Manila">
                                    <option value="Asia/Muscat">
                                    <option value="Asia/Nicosia">
                                    <option value="Asia/Novokuznetsk">
                                    <option value="Asia/Novosibirsk">
                                    <option value="Asia/Omsk">
                                    <option value="Asia/Oral">
                                    <option value="Asia/Phnom_Penh">
                                    <option value="Asia/Pontianak">
                                    <option value="Asia/Pyongyang">
                                    <option value="Asia/Qatar">
                                    <option value="Asia/Qostanay">
                                    <option value="Asia/Qyzylorda">
                                    <option value="Asia/Riyadh">
                                    <option value="Asia/Sakhalin">
                                    <option value="Asia/Samarkand">
                                    <option value="Asia/Seoul">
                                    <option value="Asia/Shanghai">
                                    <option value="Asia/Singapore">
                                    <option value="Asia/Taipei">
                                    <option value="Asia/Tashkent">
                                    <option value="Asia/Tbilisi">
                                    <option value="Asia/Tehran">
                                    <option value="Asia/Thimphu">
                                    <option value="Asia/Tokyo">
                                    <option value="Asia/Tomsk">
                                    <option value="Asia/Ulaanbaatar">
                                    <option value="Asia/Urumqi">
                                    <option value="Asia/Vientiane">
                                    <option value="Asia/Vladivostok">
                                    <option value="Asia/Yakutsk">
                                    <option value="Asia/Yangon">
                                    <option value="Asia/Yekaterinburg">
                                    <option value="Asia/Yerevan">
                                    <option value="Atlantic/Azores">
                                    <option value="Atlantic/Bermuda">
                                    <option value="Atlantic/Canary">
                                    <option value="Atlantic/Cape_Verde">
                                    <option value="Atlantic/Faroe">
                                    <option value="Atlantic/Madeira">
                                    <option value="Atlantic/Reykjavik">
                                    <option value="Atlantic/South_Georgia">
                                    <option value="Atlantic/St_Helena">
                                    <option value="Australia/Adelaide">
                                    <option value="Australia/Brisbane">
                                    <option value="Australia/Broken_Hill">
                                    <option value="Australia/Darwin">
                                    <option value="Australia/Hobart">
                                    <option value="Australia/Lord_Howe">
                                    <option value="Australia/Melbourne">
                                    <option value="Australia/Perth">
                                    <option value="Australia/Sydney">
                                    <option value="Europe/Amsterdam">
                                    <option value="Europe/Andorra">
                                    <option value="Europe/Astrakhan">
                                    <option value="Europe/Athens">
                                    <option value="Europe/Belgrade">
                                    <option value="Europe/Berlin">
                                    <option value="Europe/Bratislava">
                                    <option value="Europe/Brussels">
                                    <option value="Europe/Bucharest">
                                    <option value="Europe/Budapest">
                                    <option value="Europe/Chisinau">
                                    <option value="Europe/Copenhagen">
                                    <option value="Europe/Dublin">
                                    <option value="Europe/Gibraltar">
                                    <option value="Europe/Guernsey">
                                    <option value="Europe/Helsinki">
                                    <option value="Europe/Isle_of_Man">
                                    <option value="Europe/Istanbul">
                                    <option value="Europe/Jersey">
                                    <option value="Europe/Kaliningrad">
                                    <option value="Europe/Kiev">
                                    <option value="Europe/Kirov">
                                    <option value="Europe/Lisbon">
                                    <option value="Europe/Ljubljana">
                                    <option value="Europe/London">
                                    <option value="Europe/Luxembourg">
                                    <option value="Europe/Madrid">
                                    <option value="Europe/Malta">
                                    <option value="Europe/Mariehamn">
                                    <option value="Europe/Minsk">
                                    <option value="Europe/Monaco">
                                    <option value="Europe/Moscow">
                                    <option value="Europe/Oslo">
                                    <option value="Europe/Paris">
                                    <option value="Europe/Podgorica">
                                    <option value="Europe/Prague">
                                    <option value="Europe/Riga">
                                    <option value="Europe/Rome">
                                    <option value="Europe/Samara">
                                    <option value="Europe/San_Marino">
                                    <option value="Europe/Sarajevo">
                                    <option value="Europe/Saratov">
                                    <option value="Europe/Simferopol">
                                    <option value="Europe/Skopje">
                                    <option value="Europe/Sofia">
                                    <option value="Europe/Stockholm">
                                    <option value="Europe/Tallinn">
                                    <option value="Europe/Tirane">
                                    <option value="Europe/Ulyanovsk">
                                    <option value="Europe/Uzhgorod">
                                    <option value="Europe/Vaduz">
                                    <option value="Europe/Vatican">
                                    <option value="Europe/Vienna">
                                    <option value="Europe/Vilnius">
                                    <option value="Europe/Volgograd">
                                    <option value="Europe/Warsaw">
                                    <option value="Europe/Zagreb">
                                    <option value="Europe/Zaporozhye">
                                    <option value="Europe/Zurich">
                                    <option value="Indian/Antananarivo">
                                    <option value="Indian/Christmas">
                                    <option value="Indian/Cocos">
                                    <option value="Indian/Comoro">
                                    <option value="Indian/Kerguelen">
                                    <option value="Indian/Mahe">
                                    <option value="Indian/Maldives">
                                    <option value="Indian/Mauritius">
                                    <option value="Indian/Mayotte">
                                    <option value="Indian/Reunion">
                                    <option value="Pacific/Apia">
                                    <option value="Pacific/Auckland">
                                    <option value="Pacific/Bougainville">
                                    <option value="Pacific/Chatham">
                                    <option value="Pacific/Chuuk">
                                    <option value="Pacific/Efate">
                                    <option value="Pacific/Enderbury">
                                    <option value="Pacific/Fakaofo">
                                    <option value="Pacific/Fiji">
                                    <option value="Pacific/Funafuti">
                                    <option value="Pacific/Galapagos">
                                    <option value="Pacific/Guadalcanal">
                                    <option value="Pacific/Guam">
                                    <option value="Pacific/Honolulu">
                                    <option value="Pacific/Kiritimati">
                                    <option value="Pacific/Kosrae">
                                    <option value="Pacific/Kwajalein">
                                    <option value="Pacific/Majuro">
                                    <option value="Pacific/Marquesas">
                                    <option value="Pacific/Nauru">
                                    <option value="Pacific/Niue">
                                    <option value="Pacific/Norfolk">
                                    <option value="Pacific/Noumea">
                                    <option value="Pacific/Pago_Pago">
                                    <option value="Pacific/Palau">
                                    <option value="Pacific/Pitcairn">
                                    <option value="Pacific/Pohnpei">
                                    <option value="Pacific/Port_Moresby">
                                    <option value="Pacific/Rarotonga">
                                    <option value="Pacific/Saipan">
                                    <option value="Pacific/Tahiti">
                                    <option value="Pacific/Tarawa">
                                    <option value="Pacific/Tongatapu">
                                    <option value="Pacific/Wallis">
                            </datalist>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <input type="checkbox" class="form-check-input" checked id="inputLT" required>
                            <label class="form-check-label" for="inputLT">
                                Compare to Local Timezone
                            </label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12" style="position: relative">
                            <textarea spellcheck="false" cols="40" rows="8" name="js_obj" id="post_data" class="form-control" placeholder=""></textarea>
                            <div class="btn-grey btn-random btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M21 9h2v11h-17v3l-6-4 6-4v3h15v-9zm-18-3h15v3l6-4-6-4v3h-17v11h2v-9z"/></svg>
                            </div>
                            <div class="btn-grey btn-copy btn">
                                <svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true" height="16" width="16">
                                    <path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="form-row d-flex justify-content-end">
                        <button type="submit" class="btn btn-dark" id="submit">Calculate</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<script>
    $(document).ready(() => {
        // Default date value to current date
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();
        $("#inputDate")[0].value = yyyy + "-" + mm + "-" + dd

        // Helper Functions
        let g = (el) => $(el).get(0).value
        let v = (el) => $(el).get(0).valueAsDate

        // Recent Results
        n = localStorage.getItem('ls_res').split(",").reverse()
        if (n.includes("null")) {
            n.splice(n.indexOf("null"), 1)
        }
        html = ""
        n.forEach((element, i) => {
            if (i <= 2) {
                html += `<a href="/results?id=${element}&saveNew=false"><img class="result_image_small" src="/static/${element}-dark.png"></a>`
            }
        });
        $("#sidebar-content")[0].innerHTML = html

        // Adjust Python input based on form input
        $("input").on("change paste keyup", () => {
            // Define
            let [start, end, pStart, pEnd] = [g('#inputStartTime'), g('#inputEndTime'), g('#inputEStartTime'), g('#inputEEndTime')]
            let [day, month, year] = [v('#inputDate').getDate(), v('#inputDate').getMonth() + 1, v('#inputDate').getFullYear()]
            let localTimezone = $('#inputLT').get(0).checked ? null :
                $('#inputLocalTimezone').get(0).value == "" ? null : $('#inputLocalTimezone').get(0).value
            let [cw, offset] = [g('#inputCW'), g('#inputOffset')]

            // Validate 
            window.changeBorderColor(["#inputCW", "#inputDate", "#inputOffset", "#inputLocalTimezone"], "green")

            if (parseInt(start.slice(0, 2)) >= parseInt(end.slice(0, 2))) {
                if (parseInt(start.slice(0, 2)) == parseInt(end.slice(0, 2)) && parseInt(start.slice(3, 5)) < parseInt(end.slice(3, 5))) {
                    window.changeBorderColor(["#inputStartTime", "#inputEndTime"], "green")
                } else {
                    alert("Start time must occur before end time.")
                    window.changeBorderColor(["#inputStartTime", "#inputEndTime"], "red")
                }
            } else if (start !== "" && end !== "") {
                window.changeBorderColor(["#inputStartTime", "#inputEndTime"], "green")
            }

            if (pStart === "") {
                pStart = start
            }
            if (pEnd === "") {
                pEnd = end
            }

            // Update
            window.obj = {
                "entries": {
                    "EG": 1,
                    "DZ": 1,
                    "PK": 1,
                    "IQ": 1
                },
                "start": start,
                "end": end,
                "preferrable-start": pStart,
                "preferrable-end": pEnd,
                "country-weight": parseInt(cw),
                "day": parseInt(day),
                "month": parseInt(month),
                "year": parseInt(year),
                "offset": parseInt(offset),
                "format": "alpha_2",
                "local_timezone": localTimezone,
                "type": "countries"
            }
            $('#post_data').get(0).value = JSON.stringify(window.obj, null, 2)
        })
        $("textarea").on("change paste keyup", (el) => {
            // Sync
            el.target.value = el.target.value.replace("None", "null")
            let l = JSON.parse(el.target.value)
            console.log(l["start"])
            $("#inputStartTime")[0].value = l["start"].slice(0, 2).includes(":") ? 0 + l["start"] : l["start"]
            $("#inputEndTime")[0].value = l["end"].slice(0, 2).includes(":") ? 0 + l["end"] : l["end"]
            $("#inputEStartTime")[0].value = $("#inputEStartTime")[0].value == "" ? l["start"] : l["preferrable-start"]
            $("#inputEEndTime")[0].value = $("#inputEEndTime")[0].value == "" ? l["end"] : l["preferrable-end"]
            $("#inputDate")[0].value = `${l["year"]}-${l["month"]<10?"0"+l["month"]:l["month"]}-${l["day"]}`
            $("#inputCW")[0].value = l["country-weight"]
            $("#inputOffset")[0].value = l["offset"]
            if (l["local_timezone"] !== null) {
                $("#inputLocalTimezone")[0].value = l["local_timezone"]
            }
        })
        $("textarea").change(() => {
            $("input").keyup()
        })
    })
</script>
{% endblock %}